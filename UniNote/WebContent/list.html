<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
	<title>list</title>

	<!-- CSS  -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
	<link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
	
	<style type="text/css">
    input{
      max-width: 80%;
    }
    .btn{
      max-width: 30%;
    }
	.row{
	  margin-left: 9%;
	  margin-right: 9%;
	}
	img{
		max-width: 42px;
		padding: 0;
	}
	</style>
	<!--  Scripts-->
	<script src="js/jQuery.js"></script>
	<script src="js/materialize.js"></script>
	<script src="js/writeHTML.js"></script>
	<script src="js/xmlhttp.js"></script>
	<script src="js/cookie.js"></script>
	<script src="js/LoginAjax.js"></script>
	<script type="text/javascript">
		function get_course_list(xmlhttp_course){
			 if (xmlhttp_course.readyState==4 && xmlhttp_course.status==200){
                //file_elements是一个数组
                var text=xmlhttp_course.responseText;
            try{
                var xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
                xmlDoc.async="false";
                xmlDoc.loadXML(text);
            }catch(e){
                try{
                    var parser=new DOMParser();
                    xmlDoc=parser.parseFromString(text,"text/xml");
                }catch(e) {
            	    alert(e.message);
                }
            }
            var departments=xmlDoc.getElementsByTagName("department");
            var txt=write_course_list(departments);
            $("#course_list").html(txt);
            }
		}

	    function onResponse(xmlhttp){
  	   	    if (xmlhttp.readyState==4 && xmlhttp.status==200){
                //file_elements是一个数组
                var text=xmlhttp.responseText;
            try{
                var xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
                xmlDoc.async="false";
                xmlDoc.loadXML(text);
            }catch(e){
                try{
                    var parser=new DOMParser();
                    xmlDoc=parser.parseFromString(text,"text/xml");
                }catch(e) {
            	    alert(e.message);
                }
            }
                var file_elements=xmlDoc.getElementsByTagName("document"); 

                var txt=write_document_list(file_elements);
                $("#filelist").html(txt);
            }
	    }
	    function init_left_list(){
	    	var university=$('#university-info').attr('title');
	    	var xmlhttp_course=getXmlHttp();
            if(xmlhttp_course!=null){
            	xmlhttp_course.open("GET","/UniNote/CategoryServlet?school="+encodeURI(encodeURI(university)),true);
            	xmlhttp_course.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            	xmlhttp_course.onreadystatechange=function(){get_course_list(xmlhttp_course)};
            	xmlhttp_course.send();
 				
            }else{
            	alert("Your browser does not support XMLHttpRequest.");
            }
	    }
	    function init_list(department_chosen,course_chosen){
            var xmlhttp=getXmlHttp();
            var university=$('#university-info').attr('title');
            var nickname=$('#user-name').attr('title');
            //alert(university);
            if(xmlhttp!=null){
            	xmlhttp.open("GET","/UniNote/DocumentOverViewServlet?school="+university+"&department="+department_chosen+"&course="+course_chosen+"&nickname="+nickname,true);
            	xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xmlhttp.onreadystatechange=function(){onResponse(xmlhttp)};
                xmlhttp.send();	
            }else{
            	alert("Your browser does not support XMLHttpRequest.");
            }     	
        }
	    //end init_list


	</script>

</head>
<body onload='check_cookie();write_footer();init_list("all","all");init_left_list()'>

	<header></header>

	<div class="main container">
		<div class="row">
			<!-- 左边l4 -->
			<div class="col s12 l4">
				<br />
				<h4>选择课程</h4>
				<!--左边的内容-->
				<div id="course_list"></div>
				<!-- 左边l4END -->
			</div>
			<!-- 右边l8 -->
			<div class="col s12 l8">
				<br />
				<br />
				<form id="searchZone">
					<div>
						<input type="text" data-provide="typeahead">
						<a class="waves-effect waves-light btn">搜索</a>
					</div>
				</form>
				<br />
				<div>
					<ul class="collection" id="filelist"></ul>
				</div>

				<div class="bdsharebuttonbox">
					<a href="#" class="bds_more" data-cmd="more">分享到：</a>
					<a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a>
					<a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a>
					<a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友">QQ好友</a>
					<a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网">豆瓣网</a>
					<a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a>
					<a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网">人人网</a>
					<a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址">复制网址</a>
				</div>
				<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"分享自uniNOTE的文档:","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
				<div>
					<ul class="pagination">
						<li class="disabled">
							<a href="#!"> <i class="material-icons">chevron_left</i>
							</a>
						</li>
						<li class="active" >
							<a href="#!">1</a>
						</li>
						<li class="waves-effect">
							<a href="#!">2</a>
						</li>
						<li class="waves-effect">
							<a href="#!">3</a>
						</li>
						<li class="waves-effect">
							<a href="#!">4</a>
						</li>
						<li class="waves-effect">
							<a href="#!">5</a>
						</li>
						<li class="waves-effect">
							<a href="#!"> <i class="material-icons">chevron_right</i>
							</a>
						</li>
					</ul>
				</div>
			</div>
			<!-- 右边l8END -->
		</div>
	</div>
	<!--main container-->

	<div id="footer"></div>

</body>
</html>